(function(_){var filename = ((function(){var _documentCurrentScript = typeof document !== "undefined" ? document.currentScript : null;return typeof document === "undefined" ? require("url").pathToFileURL(__filename).href : _documentCurrentScript && _documentCurrentScript.src || new URL("index_8959.js", document.baseURI).href})());for(var r in _){_[r].__farm_resource_pot__=filename;window['6a0c116a218a403c6f0e6f69157a05cf'].__farm_module_system__.register(r,_[r])}})({"0674cc3a":function e(e,a,l,t){e._m(a);var u=l("9aaf3498"),n=l("9aaf3498"),o=l("9aaf3498"),r=l("1f6a8afd"),v=l("d8dfe26b"),d=e.i(l("51231a61")),i={class:"page-container"};a.default=u.defineComponent({__name:"MyParcels",setup(a){var l=r.useMessage(),t=o.ref(!1),u=o.ref([]),s=o.ref(0),f=o.ref(1),p=o.ref(20),c=o.ref(null),g=[{label:"全部",value:""},{label:"待取件",value:"ready"},{label:"已取件",value:"picked_up"},{label:"滞留",value:"overdue"}],h=async()=>{t.value=!0;var e=await v.getMyParcels({status:c.value||void 0,page:f.value,page_size:p.value});0===e.code&&e.data?(u.value=e.data.list,s.value=e.data.pagination.total):l.error(e.message||"加载失败"),t.value=!1;},m=e=>{f.value=e,h();},N=e=>{p.value=e,f.value=1,h();},_=()=>{f.value=1,h();};return o.onMounted(()=>{h();}),(a,l)=>(n.openBlock(),n.createElementBlock("div",i,[n.createVNode(n.unref(r.NCard),{title:"我的包裹"},{default:n.withCtx(()=>[n.createVNode(n.unref(r.NSpace),{style:{"margin-bottom":"16px"}},{default:n.withCtx(()=>[n.createVNode(n.unref(r.NSelect),{value:c.value,"onUpdate:value":[l[0]||(l[0]=e=>c.value=e),_],options:g,placeholder:"状态筛选",style:{width:"150px"}},null,8,["value"])]),_:1}),n.createVNode(e.f(d),{parcels:u.value,loading:t.value,"show-notes":"",pagination:{page:f.value,pageSize:p.value,total:s.value,onChange:m,onSizeChange:N}},null,8,["parcels","loading","pagination"])]),_:1})]));}});},"158d2258":function e(e,t,a,o){e._m(t);var d=a("9aaf3498"),i=a("9aaf3498"),n=a("9aaf3498"),r=a("1f6a8afd"),l=a("704cb3d6"),c=a("4b107ec9"),u=a("7e15ef1a"),s=a("db7444c2");t.default=d.defineComponent({__name:"OverdueTable",props:{overdueItems:{},loading:{type:Boolean,default:!1},checkedKeys:{default:()=>[]},pagination:{type:Boolean},scrollX:{default:1300}},emits:["remind","return","update:checkedKeys"],setup(e,t){var a=t.emit,o=n.computed(()=>[{type:"selection"},{title:"ID",key:"id",width:60},{title:"取件码",key:"pickup_code",width:100,render:e=>n.h("strong",{style:c.PICKUP_CODE_STYLE},e.pickup_code)},{title:"快递单号",key:"tracking_number",width:140},{title:"收件人",key:"recipient_name",width:80},{title:"手机号",key:"recipient_phone",width:120},{title:"货架",key:"shelf_code",width:80,render:e=>e.shelf_code||"-"},{title:"滞留天数",key:"overdue_days",width:100,render:e=>n.h("span",{style:{color:c.getOverdueDaysColor(e.overdue_days),fontWeight:"bold"}},"".concat(e.overdue_days," 天"))},{title:"提醒次数",key:"reminder_count",width:80},{title:"滞留费",key:"overdue_fee",width:80,render:e=>u.formatAmount(e.overdue_fee)},{title:"状态",key:"status",width:80,render:e=>{var t=l.OVERDUE_STATUS_MAP[e.status]||{text:e.status,type:"default"};return n.h(r.NTag,{type:t.type},{default:()=>t.text});}},{title:"操作",key:"actions",width:150,render:e=>"returned"===e.status?n.h("span",{style:"color: #999;"},"已退回"):n.h(r.NSpace,{},{default:()=>[n.h(r.NButton,{size:"small",type:"info",onClick:()=>a("remind",e)},{default:()=>"发送提醒"}),n.h(r.NPopconfirm,{onPositiveClick:()=>a("return",[e.id])},{trigger:()=>n.h(r.NButton,{size:"small",type:"error"},{default:()=>"退回"}),default:()=>"确定退回该包裹吗？"})]})}]),d=s.usePaginationConfig(()=>e.pagination),y=e=>{a("update:checkedKeys",e);};return(t,a)=>(i.openBlock(),i.createBlock(i.unref(r.NDataTable),{remote:!!e.pagination,columns:o.value,data:e.overdueItems,loading:e.loading,pagination:i.unref(d),"scroll-x":e.scrollX,"row-key":e=>e.id,"checked-row-keys":e.checkedKeys,"onUpdate:checkedRowKeys":y},null,8,["remote","columns","data","loading","pagination","scroll-x","row-key","checked-row-keys"]));}});},"15b743bd":function f(f,a,d,i){f._m(a);var n=f.i(d("6d975462"));a.default=f.f(n);},"1af7f2eb":function e(e,d,o,a){e._m(d),e.o(d,"getOverdueList",()=>i),e.o(d,"sendReminder",()=>n),e.o(d,"batchReturn",()=>r),e.o(d,"checkOverdue",()=>t);var v=e.i(o("def7c50a")),i=async d=>{try{var o,a,i,n;return await e.f(v).get("/overdue",{params:d});}catch(e){return{code:(null===(a=e.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.code)||5e4,message:(null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)||"获取滞留件列表失败",data:void 0};}},n=async d=>{try{var o,a,i,n;return await e.f(v).post("/overdue/".concat(d,"/remind"));}catch(e){return{code:(null===(a=e.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.code)||5e4,message:(null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)||"发送提醒失败",data:void 0};}},r=async d=>{try{var o,a,i,n;return await e.f(v).post("/overdue/batch-return",{ids:d});}catch(e){return{code:(null===(a=e.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.code)||5e4,message:(null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)||"批量退回失败",data:void 0};}},t=async()=>{try{var d,o,a,i;return await e.f(v).post("/overdue/check");}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(a=i.data)||void 0===a?void 0:a.message)||"检查失败",data:void 0};}};},"2025bacc":function e(e,a,t,i){e._m(a),e.o(a,"getMyShipments",()=>d),e.o(a,"createShipment",()=>s),e.o(a,"calculateFreight",()=>l),e.o(a,"getCourierCompanies",()=>n);var o=e.i(t("def7c50a")),d=async a=>{try{var t,i,d,s;return await e.f(o).get("/my-shipments",{params:a});}catch(e){return{code:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.code)||5e4,message:(null===(s=e.response)||void 0===s?void 0:null===(d=s.data)||void 0===d?void 0:d.message)||"获取寄件单列表失败",data:void 0};}},s=async a=>{try{var t,i,d,s;return await e.f(o).post("/shipments",a);}catch(e){return{code:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.code)||5e4,message:(null===(s=e.response)||void 0===s?void 0:null===(d=s.data)||void 0===d?void 0:d.message)||"创建失败",data:void 0};}},l=async a=>{try{var t,i,d,s,l=await e.f(o).post("/shipments/calculate-freight",a);return 0===l.code&&l.data&&(l.data={freight:l.data.freight,calculation_details:{base_freight:l.data.calculation_details.base_freight,weight_freight:l.data.calculation_details.weight_freight,volume_freight:l.data.calculation_details.volume_freight}}),l;}catch(e){return{code:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.code)||5e4,message:(null===(s=e.response)||void 0===s?void 0:null===(d=s.data)||void 0===d?void 0:d.message)||"计算失败",data:void 0};}},n=async()=>{try{return await e.f(o).get("/courier-companies");}catch(e){var a,t,i,d;return{code:(null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.code)||5e4,message:(null===(d=e.response)||void 0===d?void 0:null===(i=d.data)||void 0===i?void 0:i.message)||"获取快递公司列表失败",data:void 0};}};},"227faad3":function a(a,d,e,c){a._m(d);var f=a.i(e("6e9a68c3")),_=a.i(e("ddc00f4e")),i=e("6e9a68c3");a._e(d,i),d.default=a.f(_)(a.f(f),[["__scopeId","data-v-5a3b49d8"]]);},"2a33264b":function e(e,a,l,t){e._m(a),l("2554870f"),l("c98af605");var o=l("9aaf3498"),r=l("9aaf3498"),n=l("9aaf3498"),u=l("a0cf2c50"),i=l("69191e11"),d=l("1f6a8afd"),c=l("8a685886"),s={class:"sider-content"},v={class:"brand-header"},p={key:0,class:"brand-title"},h={key:1,class:"brand-title-collapsed"},f={class:"user-profile"},m={key:0,class:"username"};a.default=o.defineComponent({__name:"MainLayout",setup(e){var a=u.useRouter(),l=u.useRoute(),t=i.useUserStore();t.initFromStorage();var o=n.ref(!1),y=n.ref(!0),k=n.ref(""),N=n.computed(()=>t.userInfo),b=n.computed(()=>{var e,a=null===(e=N.value)||void 0===e?void 0:e.role;return"staff"===a||"admin"===a;}),g=n.computed(()=>{var e=[{label:"仪表盘",key:"/dashboard",icon:()=>n.h(c.HomeOutline)},{label:"包裹查询",key:"/search",icon:()=>n.h(c.SearchOutline)}];return b.value||e.push({label:"我的包裹",key:"/my-parcels",icon:()=>n.h(c.CubeOutline)},{label:"我的寄件",key:"/my-shipments",icon:()=>n.h(c.SendOutline)}),b.value&&(e.push({label:"包裹管理",key:"/parcel-management",icon:()=>n.h(c.BarChartOutline)}),e.push({label:"货架管理",key:"/shelf-management",icon:()=>n.h(c.GridOutline)}),e.push({label:"滞留件管理",key:"/overdue-management",icon:()=>n.h(c.AlertCircleOutline)})),e;}),w=[{label:"个人中心",key:"profile"},{label:"退出登录",key:"logout"}];n.watch(o,e=>{e?y.value=!1:setTimeout(()=>{y.value=!0;},100);}),n.watch(()=>l.path,e=>{k.value=e;},{immediate:!0});var C=e=>{a.push(e);},V=e=>{"profile"===e?a.push("/profile"):"logout"===e&&(t.logout(),a.push("/login"));};return n.onMounted(()=>{if(!t.isLoggedIn){a.push("/login");return;}var e=a.currentRoute.value.path;g.value.map(e=>e.key).includes(e)?k.value=e:k.value="/dashboard";}),(e,a)=>{var l=r.resolveComponent("router-view");return r.openBlock(),r.createBlock(r.unref(d.NLayout),{class:"main-layout","has-sider":""},{default:r.withCtx(()=>[r.createVNode(r.unref(d.NLayoutSider),{bordered:"","collapse-mode":"width","collapsed-width":64,width:240,"show-trigger":"",collapsed:o.value,"onUpdate:collapsed":a[1]||(a[1]=e=>o.value=e),"native-scrollbar":!1},{default:r.withCtx(()=>[r.createElementVNode("div",s,[r.createElementVNode("div",v,[o.value?(r.openBlock(),r.createElementBlock("h2",h,"物流")):(r.openBlock(),r.createElementBlock("h2",p,"校园物流"))]),r.createVNode(r.unref(d.NMenu),{value:k.value,"onUpdate:value":[a[0]||(a[0]=e=>k.value=e),C],options:g.value,"collapsed-width":64,"collapsed-icon-size":22},null,8,["value","options"]),r.createElementVNode("div",f,[r.createVNode(r.unref(d.NDropdown),{options:w,onSelect:V},{default:r.withCtx(()=>[r.createVNode(r.unref(d.NSpace),{align:"center"},{default:r.withCtx(()=>{var e,a;return[r.createVNode(r.unref(d.NAvatar),{round:"",size:32,style:{backgroundColor:"#18a058",color:"#fff"}},{default:r.withCtx(()=>{var e,a;return[r.createTextVNode(r.toDisplayString((null===(a=N.value)||void 0===a?void 0:null===(e=a.username)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"),1)];}),_:1}),!o.value&&y.value?(r.openBlock(),r.createElementBlock("span",m,r.toDisplayString((null===(e=N.value)||void 0===e?void 0:e.realName)||(null===(a=N.value)||void 0===a?void 0:a.username)),1)):r.createCommentVNode("",!0)];}),_:1})]),_:1})])])]),_:1},8,["collapsed"]),r.createVNode(r.unref(d.NLayout),null,{default:r.withCtx(()=>[r.createVNode(r.unref(d.NLayoutContent),{"content-style":"padding: 24px;"},{default:r.withCtx(()=>[r.createVNode(l)]),_:1})]),_:1})]),_:1});};}});},"33a636cf":function e(e,d,o,a){e._m(d),e.o(d,"getShelfList",()=>t),e.o(d,"createShelf",()=>i),e.o(d,"updateShelf",()=>v),e.o(d,"deleteShelf",()=>l),e.o(d,"getShelfStatistics",()=>n);var s=e.i(o("def7c50a")),t=async d=>{try{var o,a,t,i;return await e.f(s).get("/shelves",{params:d});}catch(e){return{code:(null===(a=e.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.message)||"获取货架列表失败",data:void 0};}},i=async d=>{try{var o,a,t,i;return await e.f(s).post("/shelves",d);}catch(e){return{code:(null===(a=e.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.message)||"创建货架失败",data:void 0};}},v=async(d,o)=>{try{var a,t,i,v;return await e.f(s).put("/shelves/".concat(d),o);}catch(e){return{code:(null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.code)||5e4,message:(null===(v=e.response)||void 0===v?void 0:null===(i=v.data)||void 0===i?void 0:i.message)||"更新货架失败",data:void 0};}},l=async d=>{try{var o,a,t,i;return await e.f(s).delete("/shelves/".concat(d));}catch(e){return{code:(null===(a=e.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.message)||"删除货架失败",data:void 0};}},n=async()=>{try{var d,o,a,t;return await e.f(s).get("/shelves/statistics");}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||"获取统计数据失败",data:void 0};}};},"37ef8574":function e(e,a,o,d){e._m(a),e.o(a,"register",()=>t),e.o(a,"login",()=>r),e.o(a,"getProfile",()=>s),e.o(a,"updateProfile",()=>l);var i=e.i(o("def7c50a")),t=async a=>{try{return await e.f(i).post("/register",a);}catch(e){var o,d,t,r;return{code:(null===(d=e.response)||void 0===d?void 0:null===(o=d.data)||void 0===o?void 0:o.code)||5e4,message:(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"注册失败",data:void 0};}},r=async a=>{try{var o,d,t,r,s=await e.f(i).post("/login",a);return 0===s.code&&s.data&&(localStorage.setItem("accessToken",s.data.accessToken),localStorage.setItem("userInfo",JSON.stringify(s.data.user))),s;}catch(e){return{code:(null===(d=e.response)||void 0===d?void 0:null===(o=d.data)||void 0===o?void 0:o.code)||5e4,message:(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"登录失败",data:void 0};}},s=async()=>{try{return await e.f(i).get("/user");}catch(e){var a,o,d,t;return{code:(null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.code)||5e4,message:(null===(t=e.response)||void 0===t?void 0:null===(d=t.data)||void 0===d?void 0:d.message)||"获取用户信息失败",data:void 0};}},l=async a=>{try{var o,d,t,r,s=await e.f(i).put("/user",a);if(0===s.code){var l=localStorage.getItem("userInfo");if(l){var n=JSON.parse(l);n.realName=a.realName,void 0!==a.email&&(n.email=a.email),localStorage.setItem("userInfo",JSON.stringify(n));}}return s;}catch(e){return{code:(null===(d=e.response)||void 0===d?void 0:null===(o=d.data)||void 0===o?void 0:o.code)||5e4,message:(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"更新失败",data:void 0};}};},"3dff9ef7":function f(f,a,d,i){f._m(a);var n=f.i(d("158d2258"));a.default=f.f(n);},"3e061461":function c(c,f,d,a){c._m(f);var e=c.i(d("64c6cf1d")),_=c.i(d("ddc00f4e")),i=d("64c6cf1d");c._e(f,i),f.default=c.f(_)(c.f(e),[["__scopeId","data-v-2b0fc515"]]);},"469b4b14":function f(f,d,a,c){f._m(d);var e=f.i(a("875cfa3f")),_=f.i(a("ddc00f4e")),i=a("875cfa3f");f._e(d,i),d.default=f.f(_)(f.f(e),[["__scopeId","data-v-6d040c7d"]]);},"4b107ec9":function o(o,t,e,n){o._m(t),o.o(t,"PICKUP_CODE_STYLE",()=>a),o.o(t,"getThresholdColor",()=>f),o.o(t,"getOverdueDaysColor",()=>u),o.o(t,"getUsageRateColor",()=>c);var r=e("493f9ad4"),a={color:"#18a058",fontSize:"14px",fontWeight:"bold"};function f(o){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[70,30],e=r._(t,2),n=e[0],a=e[1];return o>=n?"#f5222d":o>=a?"#fa8c16":"#52c41a";}function u(o){return f(o,[7,3]);}function c(o){return f(o,[90,70]);}},"51231a61":function f(f,a,d,i){f._m(a);var n=f.i(d("84717d33"));a.default=f.f(n);},"65fc1a6b":function e(e,a,t,r){e._m(a);var n=t("a0cf2c50"),m=e.i(t("92b274a6")),o=e.i(t("469b4b14")),i=e.i(t("df6390f9")),f=e.i(t("665ae886")),s=e.i(t("3e061461")),c=e.i(t("66391d89")),h=e.i(t("c00da6d7")),p=e.i(t("d00b0f38")),u=e.i(t("227faad3")),l=e.i(t("d78dc10f")),d=e.i(t("87888e01")),g=e.i(t("8fd984f4")),q=[{path:"/",name:"Home",component:e.f(m),meta:{requiresAuth:!1}},{path:"/login",name:"Login",component:e.f(o),meta:{requiresAuth:!1}},{path:"/register",name:"Register",component:e.f(i),meta:{requiresAuth:!1}},{path:"/",component:e.f(f),meta:{requiresAuth:!0},children:[{path:"dashboard",name:"Dashboard",component:e.f(s)},{path:"search",name:"Search",component:e.f(c),meta:{requiresAuth:!1}},{path:"my-parcels",name:"MyParcels",component:e.f(h),meta:{requiresUser:!0}},{path:"my-shipments",name:"MyShipments",component:e.f(p),meta:{requiresUser:!0}},{path:"parcel-management",name:"ParcelManagement",component:e.f(u),meta:{requiresStaff:!0}},{path:"shelf-management",name:"ShelfManagement",component:e.f(l),meta:{requiresStaff:!0}},{path:"overdue-management",name:"OverdueManagement",component:e.f(d),meta:{requiresStaff:!0}},{path:"profile",name:"Profile",component:e.f(g)}]}],S=n.createRouter({history:n.createWebHashHistory(),routes:q});S.beforeEach((e,a,t)=>{var r=localStorage.getItem("accessToken"),n=localStorage.getItem("userInfo"),m=null;if(n)try{m=JSON.parse(n);}catch(e){t({name:"Login"});return;}if(e.meta.requiresAuth&&!r){t({name:"Login"});return;}if(e.meta.requiresStaff&&(!m||"staff"!==m.role&&"admin"!==m.role)){t({name:"Home"});return;}if(e.meta.requiresUser&&(!m||"staff"===m.role||"admin"===m.role)||"Home"===e.name&&r){t({name:"Dashboard"});return;}t();}),a.default=S;},"66391d89":function d(d,f,a,c){d._m(f);var e=d.i(a("2dd52d78")),_=d.i(a("ddc00f4e")),i=a("2dd52d78");d._e(f,i),f.default=d.f(_)(d.f(e),[["__scopeId","data-v-ac346ff7"]]);},"665ae886":function a(a,f,d,b){a._m(f);var e=a.i(d("2a33264b")),_=a.i(d("ddc00f4e")),c=d("2a33264b");a._e(f,c),f.default=a.f(_)(a.f(e),[["__scopeId","data-v-f43b152b"]]);},"69191e11":function e(e,o,a,r){e._m(o),e.o(o,"useUserStore",()=>s);var t=a("0e70da6a"),l=a("9aaf3498"),s=t.defineStore("user",()=>{var e=l.ref(null),o=l.ref(""),a=l.computed(()=>!!o.value);return{userInfo:e,accessToken:o,isLoggedIn:a,setToken:e=>{o.value=e,localStorage.setItem("accessToken",e);},setUserInfo:o=>{e.value=o,localStorage.setItem("userInfo",JSON.stringify(o));},logout:()=>{e.value=null,o.value="",localStorage.removeItem("accessToken"),localStorage.removeItem("userInfo");},initFromStorage:()=>{var a=localStorage.getItem("accessToken"),r=localStorage.getItem("userInfo");if(a&&(o.value=a),r)try{e.value=JSON.parse(r);}catch(e){console.error("Failed to parse user info from localStorage");}}};});},"6b9a912b":function t(t,e,a,i){t._m(e);var n=a("9aaf3498"),o=a("9aaf3498"),l=a("9aaf3498"),r=a("1f6a8afd"),p=a("704cb3d6"),d=a("7e15ef1a"),u=a("db7444c2");e.default=n.defineComponent({__name:"ShipmentTable",props:{shipments:{},loading:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},pagination:{type:Boolean},scrollX:{default:1200}},setup(t){var e=l.computed(()=>{var e=[];return e.push({title:"寄件单号",key:"shipment_number",width:180}),e.push({title:"收件人",key:"recipient_name",width:100}),t.compact||e.push({title:"收件电话",key:"recipient_phone",width:120},{title:"收件地址",key:"recipient_address",width:200,ellipsis:{tooltip:!0}}),e.push({title:"快递公司",key:"courier_company",width:100}),t.compact||e.push({title:"重量",key:"weight",width:80,render:t=>d.formatWeight(t.weight)}),e.push({title:"运费",key:"freight",width:80,render:t=>d.formatAmount(t.freight)}),e.push({title:"状态",key:"status",width:100,render:t=>{var e=p.SHIPMENT_STATUS_MAP[t.status]||{text:t.status,type:"default"};return l.h(r.NTag,{type:e.type},{default:()=>e.text});}}),t.compact||e.push({title:"创建时间",key:"created_at",width:160,render:t=>d.formatDateTime(t.created_at)}),e;}),a=u.usePaginationConfig(()=>t.pagination);return(i,n)=>(o.openBlock(),o.createBlock(o.unref(r.NDataTable),{remote:!!t.pagination,columns:e.value,data:t.shipments,loading:t.loading,pagination:o.unref(a),"scroll-x":t.compact?void 0:t.scrollX},null,8,["remote","columns","data","loading","pagination","scroll-x"]));}});},"6d975462":function e(e,t,a,l){e._m(t);var i=a("9aaf3498"),n=a("9aaf3498"),o=a("9aaf3498"),r=a("1f6a8afd"),d=a("704cb3d6"),u=a("4b107ec9"),c=a("db7444c2");t.default=i.defineComponent({__name:"ShelfTable",props:{shelves:{},loading:{type:Boolean,default:!1},pagination:{type:Boolean},scrollX:{default:1e3}},emits:["edit","delete"],setup(e,t){var a=t.emit,l={small:"小件",medium:"中件",large:"大件"},i=o.computed(()=>[{title:"ID",key:"id",width:60},{title:"货架编码",key:"shelf_code",width:100},{title:"区域",key:"area",width:60},{title:"层",key:"floor",width:60},{title:"列",key:"column",width:60},{title:"类型",key:"type",width:80,render:e=>l[e.type]||e.type},{title:"容量",key:"capacity",width:80,render:e=>{var t;return"".concat(null!==(t=e.current_count)&&void 0!==t?t:0,"/").concat(e.capacity);}},{title:"使用率",key:"utilization",width:120,render:e=>{var t,a=Math.round((null!==(t=e.current_count)&&void 0!==t?t:0)/e.capacity*100);return o.h(r.NProgress,{type:"line",percentage:a,color:u.getUsageRateColor(a),showIndicator:!0});}},{title:"状态",key:"status",width:80,render:e=>{var t,a,l=d.SHELF_STATUS_MAP[null!==(t=e.status)&&void 0!==t?t:"active"]||{text:null!==(a=e.status)&&void 0!==a?a:"未知",type:"default"};return o.h(r.NTag,{type:l.type},{default:()=>l.text});}},{title:"操作",key:"actions",width:150,render:e=>o.h(r.NSpace,{},{default:()=>{var t;return[o.h(r.NButton,{size:"small",onClick:()=>a("edit",e)},{default:()=>"编辑"}),o.h(r.NButton,{size:"small",type:"error",disabled:(null!==(t=e.current_count)&&void 0!==t?t:0)>0,onClick:()=>a("delete",e)},{default:()=>"删除"})];}})}]),s=c.usePaginationConfig(()=>e.pagination);return(t,a)=>(n.openBlock(),n.createBlock(n.unref(r.NDataTable),{remote:!!e.pagination,columns:i.value,data:e.shelves,loading:e.loading,pagination:n.unref(s),"scroll-x":e.scrollX},null,8,["remote","columns","data","loading","pagination","scroll-x"]));}});},"704cb3d6":function e(e,t,l,a){e._m(t),e.o(t,"PARCEL_STATUS_MAP",()=>r),e.o(t,"SHIPMENT_STATUS_MAP",()=>n),e.o(t,"OVERDUE_STATUS_MAP",()=>d),e.o(t,"SHELF_STATUS_MAP",()=>u),e.o(t,"PARCEL_STATUS_OPTIONS",()=>p),e.o(t,"OVERDUE_STATUS_OPTIONS",()=>i);var r={received:{text:"待上架",type:"info"},ready:{text:"待取件",type:"success"},picked_up:{text:"已取件",type:"default"},overdue:{text:"滞留",type:"warning"},returned:{text:"已退回",type:"error"}},n={pending:{text:"待发货",type:"warning"},shipped:{text:"已发货",type:"info"},delivered:{text:"已送达",type:"success"},cancelled:{text:"已取消",type:"error"}},d={pending:{text:"待处理",type:"warning"},reminded:{text:"已提醒",type:"info"},returned:{text:"已退回",type:"default"}},u={active:{text:"启用",type:"success"},inactive:{text:"停用",type:"warning"}},p=[{label:"全部",value:""},{label:"待上架",value:"received"},{label:"待取件",value:"ready"},{label:"已取件",value:"picked_up"},{label:"滞留",value:"overdue"},{label:"已退回",value:"returned"}],i=[{label:"全部",value:""},{label:"待处理",value:"pending"},{label:"已提醒",value:"reminded"},{label:"已退回",value:"returned"}];},"7080d915":function a(a,f,b,i){a._m(f);var n=a.i(b("6b9a912b"));f.default=a.f(n);},"7d33ac30":function c(c,f,a,i){c._m(f);var n=c.i(a("89380c7c"));f.default=c.f(n);},"7e15ef1a":function t(t,n,o,e){function r(t){return t?new Date(t).toLocaleString("zh-CN"):"-";}function c(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return null==t?"-":"¥".concat(t.toFixed(n));}function u(t){return null==t?"-":"".concat(t," kg");}t._m(n),t.o(n,"formatDateTime",()=>r),t.o(n,"formatAmount",()=>c),t.o(n,"formatWeight",()=>u),o("db38ec0f");},"84717d33":function e(e,t,a,o){e._m(t);var i=a("9aaf3498"),l=a("9aaf3498"),n=a("9aaf3498"),s=a("1f6a8afd"),p=a("704cb3d6"),d=a("4b107ec9"),r=a("7e15ef1a"),c=a("db7444c2");t.default=i.defineComponent({__name:"ParcelTable",props:{parcels:{},loading:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},showId:{type:Boolean,default:!1},showRecipient:{type:Boolean,default:!1},showNotes:{type:Boolean,default:!1},showActions:{type:Boolean,default:!1},pagination:{type:Boolean},scrollX:{default:1e3}},emits:["action"],setup(e,t){var a=t.emit,o=n.computed(()=>{var t=[];return e.showId&&t.push({title:"ID",key:"id",width:60}),t.push({title:"取件码",key:"pickup_code",width:100,render:e=>n.h("strong",{style:d.PICKUP_CODE_STYLE},e.pickup_code)}),e.compact||t.push({title:"快递单号",key:"tracking_number",width:140}),e.showRecipient&&t.push({title:"收件人",key:"recipient_name",width:80},{title:"手机号",key:"recipient_phone",width:120}),t.push({title:"快递公司",key:"courier_company",width:100}),e.compact||t.push({title:"货架",key:"shelf",width:100,render:e=>{var t;return(null===(t=e.shelf)||void 0===t?void 0:t.shelf_code)||"-";}}),t.push({title:"状态",key:"status",width:100,render:e=>{var t=p.PARCEL_STATUS_MAP[e.status]||{text:e.status,type:"default"};return n.h(s.NTag,{type:t.type},{default:()=>t.text});}}),t.push({title:"入库时间",key:"received_at",width:160,render:e=>r.formatDateTime(e.received_at)}),e.showNotes&&t.push({title:"备注",key:"notes",ellipsis:{tooltip:!0}}),e.showActions&&t.push({title:"操作",key:"actions",width:120,render:e=>"received"===e.status?n.h(s.NButton,{size:"small",type:"primary",onClick:()=>a("action","shelve",e)},{default:()=>"上架"}):null}),t;}),i=c.usePaginationConfig(()=>e.pagination);return(t,a)=>(l.openBlock(),l.createBlock(l.unref(s.NDataTable),{remote:!!e.pagination,columns:o.value,data:e.parcels,loading:e.loading,pagination:l.unref(i),"scroll-x":e.compact?void 0:e.scrollX},null,8,["remote","columns","data","loading","pagination","scroll-x"]));}});},"875cfa3f":function e(e,a,t,r){e._m(a),t("850e6c49"),t("2d08c2e5"),t("a3876e70");var l=t("9aaf3498"),o=t("9aaf3498"),n=t("9aaf3498"),s=t("a0cf2c50"),d=t("1f6a8afd"),c=t("37ef8574"),u=t("69191e11"),i={class:"login-container"},m={class:"login-content"},f={class:"login-left"},p={class:"form-actions"},v={class:"form-links"},N={class:"link-text"};a.default=l.defineComponent({__name:"Login",setup(e){var a=s.useRouter(),t=d.useMessage(),r=u.useUserStore(),l=n.ref(null),g=n.ref(!1),h=n.ref({usernameOrPhone:"",password:""}),V={usernameOrPhone:{required:!0,message:"请输入用户名或手机号",trigger:["blur","input"],validator:(e,a)=>!!a&&(!!/^1[3-9]\d{9}$/.test(a)||!!/^[a-zA-Z0-9_]{3,20}$/.test(a))},password:{required:!0,message:"请输入密码",trigger:["blur","input"]}},w=async()=>{if(!g.value){g.value=!0;var e=await c.login(h.value);0===e.code&&e.data?(r.setToken(e.data.accessToken),r.setUserInfo(e.data.user),t.success("登录成功"),a.push("/")):t.error(e.message||"用户名或密码错误"),setTimeout(()=>{g.value=!1;},1e3);}};return(e,a)=>{var t=o.resolveComponent("router-link");return o.openBlock(),o.createElementBlock("div",i,[o.createElementVNode("div",m,[o.createElementVNode("div",f,[o.createVNode(o.unref(d.NCard),{class:"login-card",bordered:!1},{default:o.withCtx(()=>[a[4]||(a[4]=o.createElementVNode("div",{class:"login-header"},[o.createElementVNode("h2",{class:"login-title"},"欢迎回来"),o.createElementVNode("p",{class:"login-subtitle"},"请登录您的账号")],-1)),o.createVNode(o.unref(d.NForm),{ref_key:"formRef",ref:l,model:h.value,"label-placement":"left","label-width":"0","require-mark-placement":"right-hanging",rules:V},{default:o.withCtx(()=>[o.createVNode(o.unref(d.NFormItem),{path:"usernameOrPhone"},{default:o.withCtx(()=>[o.createVNode(o.unref(d.NInput),{value:h.value.usernameOrPhone,"onUpdate:value":a[0]||(a[0]=e=>h.value.usernameOrPhone=e),placeholder:"用户名或手机号",size:"large"},null,8,["value"])]),_:1}),o.createVNode(o.unref(d.NFormItem),{path:"password"},{default:o.withCtx(()=>[o.createVNode(o.unref(d.NInput),{value:h.value.password,"onUpdate:value":a[1]||(a[1]=e=>h.value.password=e),type:"password",placeholder:"密码",size:"large","show-password-on":"click",onKeyup:o.withKeys(w,["enter"])},null,8,["value"])]),_:1}),o.createElementVNode("div",p,[o.createVNode(o.unref(d.NButton),{type:"primary",size:"large",block:"",loading:g.value,onClick:w},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(g.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),o.createElementVNode("div",v,[o.createElementVNode("p",N,[a[3]||(a[3]=o.createTextVNode(" 还没有账号？ ",-1)),o.createVNode(t,{to:"/register",class:"link"},{default:o.withCtx(()=>[...a[2]||(a[2]=[o.createTextVNode("立即注册",-1)])]),_:1})])])]),_:1},8,["model"])]),_:1})]),a[5]||(a[5]=o.createElementVNode("div",{class:"login-right"},[o.createElementVNode("div",{class:"brand-content"},[o.createElementVNode("h1",{class:"brand-title"},"校园物流系统"),o.createElementVNode("p",{class:"brand-description"},"便捷、高效、安全的校园物流服务平台")])],-1))])]);};}});},"87888e01":function a(a,d,e,f){a._m(d);var _=a.i(e("95a3a9ed")),c=a.i(e("ddc00f4e")),i=e("95a3a9ed");a._e(d,i),d.default=a.f(c)(a.f(_),[["__scopeId","data-v-3d461f20"]]);},"89380c7c":function e(e,t,a,r){e._m(t);var o=a("9aaf3498"),n=a("9aaf3498"),f=a("1f6a8afd");t.default=o.defineComponent({__name:"App",setup:e=>(e,t)=>{var a=n.resolveComponent("router-view");return n.openBlock(),n.createBlock(n.unref(f.NMessageProvider),null,{default:n.withCtx(()=>[n.createVNode(n.unref(f.NDialogProvider),null,{default:n.withCtx(()=>[n.createVNode(n.unref(f.NNotificationProvider),null,{default:n.withCtx(()=>[n.createVNode(a)]),_:1})]),_:1})]),_:1});}});},"8fd984f4":function c(c,d,e,f){c._m(d);var a=c.i(e("e9accfd2")),_=c.i(e("ddc00f4e")),i=e("e9accfd2");c._e(d,i),d.default=c.f(_)(c.f(a),[["__scopeId","data-v-130e4963"]]);},"92b274a6":function d(d,a,e,f){d._m(a);var b=d.i(e("3d2274bb")),_=d.i(e("ddc00f4e")),c=e("3d2274bb");d._e(a,c),a.default=d.f(_)(d.f(b),[["__scopeId","data-v-fa1ae1de"]]);},"953dfae2":function a(a,e,c,f){a._m(e);var i=c("9aaf3498"),n=c("0e70da6a"),p=a.i(c("7d33ac30")),t=a.i(c("65fc1a6b")),u=i.createApp(a.f(p)),r=n.createPinia();u.use(r),u.use(a.f(t)),u.mount("#app");},"95a3a9ed":function e(e,t,a,l){e._m(t),a("df42fcb9"),a("2d08c2e5"),a("a3876e70"),a("db38ec0f");var r=a("9aaf3498"),u=a("9aaf3498"),n=a("9aaf3498"),d=a("1f6a8afd"),i=a("1af7f2eb"),o=a("704cb3d6"),c=e.i(a("3dff9ef7")),f={class:"page-container"};t.default=r.defineComponent({__name:"OverdueManagement",setup(t){var a=d.useMessage(),l=n.ref(!1),r=n.ref([]),s=n.ref(0),v=n.ref(1),N=n.ref(20),x=n.ref(""),g=n.ref([]),h=n.computed(()=>{var e=r.value.filter(e=>"pending"===e.status).length;return{pending:e,reminded:r.value.filter(e=>"reminded"===e.status).length,returned:r.value.filter(e=>"returned"===e.status).length,totalFee:r.value.reduce((e,t)=>e+t.overdue_fee,0)};}),C=async()=>{l.value=!0;var e=await i.getOverdueList({status:x.value||void 0,page:v.value,page_size:N.value});0===e.code&&e.data?(r.value=e.data.list,s.value=e.data.pagination.total):a.error(e.message||"加载失败"),l.value=!1;},p=async e=>{var t=await i.sendReminder(e.id);0===t.code?(a.success("提醒已发送"),C()):a.error(t.message||"发送失败");},V=async e=>{var t=await i.batchReturn(e);0===t.code&&t.data?(a.success("成功退回 ".concat(t.data.success," 个包裹")),g.value=[],C()):a.error(t.message||"退回失败");},_=()=>{var e=g.value;if(0===e.length){a.warning("请选择要退回的包裹");return;}V(e);},w=async()=>{var e=await i.checkOverdue();0===e.code&&e.data?(a.success("已标记 ".concat(e.data.marked_count," 个新滞留件")),C()):a.error(e.message||"检查失败");},m=e=>{v.value=e,C();},k=e=>{N.value=e,v.value=1,C();},y=e=>{g.value=e;},b=e=>{x.value=e,v.value=1,C();};return n.onMounted(()=>{C();}),(t,a)=>(u.openBlock(),u.createElementBlock("div",f,[u.createVNode(u.unref(d.NGrid),{cols:4,"x-gap":16,style:{"margin-bottom":"16px"}},{default:u.withCtx(()=>[u.createVNode(u.unref(d.NGi),null,{default:u.withCtx(()=>[u.createVNode(u.unref(d.NCard),null,{default:u.withCtx(()=>[u.createVNode(u.unref(d.NStatistic),{label:"待处理",value:h.value.pending},{suffix:u.withCtx(()=>[...a[0]||(a[0]=[u.createTextVNode("件",-1)])]),_:1},8,["value"])]),_:1})]),_:1}),u.createVNode(u.unref(d.NGi),null,{default:u.withCtx(()=>[u.createVNode(u.unref(d.NCard),null,{default:u.withCtx(()=>[u.createVNode(u.unref(d.NStatistic),{label:"已提醒",value:h.value.reminded},{suffix:u.withCtx(()=>[...a[1]||(a[1]=[u.createTextVNode("件",-1)])]),_:1},8,["value"])]),_:1})]),_:1}),u.createVNode(u.unref(d.NGi),null,{default:u.withCtx(()=>[u.createVNode(u.unref(d.NCard),null,{default:u.withCtx(()=>[u.createVNode(u.unref(d.NStatistic),{label:"已退回",value:h.value.returned},{suffix:u.withCtx(()=>[...a[2]||(a[2]=[u.createTextVNode("件",-1)])]),_:1},8,["value"])]),_:1})]),_:1}),u.createVNode(u.unref(d.NGi),null,{default:u.withCtx(()=>[u.createVNode(u.unref(d.NCard),null,{default:u.withCtx(()=>[u.createVNode(u.unref(d.NStatistic),{label:"累计滞留费"},{prefix:u.withCtx(()=>[...a[3]||(a[3]=[u.createTextVNode("¥",-1)])]),default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(h.value.totalFee.toFixed(2)),1)]),_:1})]),_:1})]),_:1})]),_:1}),u.createVNode(u.unref(d.NCard),{title:"滞留件管理"},{"header-extra":u.withCtx(()=>[u.createVNode(u.unref(d.NSpace),null,{default:u.withCtx(()=>[u.createVNode(u.unref(d.NButton),{onClick:w},{default:u.withCtx(()=>[...a[4]||(a[4]=[u.createTextVNode("检查滞留件",-1)])]),_:1}),u.createVNode(u.unref(d.NButton),{type:"error",disabled:0===g.value.length,onClick:_},{default:u.withCtx(()=>[u.createTextVNode(" 批量退回 ("+u.toDisplayString(g.value.length)+") ",1)]),_:1},8,["disabled"])]),_:1})]),default:u.withCtx(()=>[u.createVNode(u.unref(d.NSpace),{style:{"margin-bottom":"16px"}},{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(u.unref(o.OVERDUE_STATUS_OPTIONS),e=>{var t;return u.openBlock(),u.createBlock(u.unref(d.NButton),{key:null!==(t=e.value)&&void 0!==t?t:"all",type:x.value===e.value?"primary":"default",onClick:t=>b(e.value)},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(e.label),1)]),_:2},1032,["type","onClick"]);}),128))]),_:1}),u.createVNode(e.f(c),{"overdue-items":r.value,loading:l.value,"checked-keys":g.value,pagination:{page:v.value,pageSize:N.value,total:s.value,onChange:m,onSizeChange:k},onRemind:p,onReturn:V,"onUpdate:checkedKeys":y},null,8,["overdue-items","loading","checked-keys","pagination"])]),_:1})]));}});},"b90d6007":function t(t,e,a,r){t._m(e),t.o(e,"COURIER_COMPANIES",()=>S),t.o(e,"MOCK_SHELVES",()=>h),t.o(e,"MOCK_PARCELS",()=>m),t.o(e,"MOCK_SHIPMENTS",()=>_),t.o(e,"MOCK_DASHBOARD_STATISTICS",()=>s),a("6ae72255"),a("b87694ce"),a("bf3a4d74"),a("db38ec0f"),a("e57b3270"),a("850e6c49");var o,n,i,c,d,l=a("ec0a1d90"),S=["顺丰速运","中通快递","圆通速递","申通快递","韵达快递","邮政EMS","京东物流","德邦快递"],h=Array.from({length:50},(t,e)=>({id:e+1,shelf_code:"".concat(String.fromCharCode(65+Math.floor(e/10)),"-").concat(String(Math.floor(e%10/5)+1).padStart(2,"0"),"-").concat(String(e%5+1).padStart(2,"0")),area:String.fromCharCode(65+Math.floor(e/10)),floor:Math.floor(e%10/5)+1,column:e%5+1,type:["small","medium","large"][e%3],capacity:[20,15,10][e%3],current_count:Math.floor(Math.random()*[20,15,10][e%3]),status:"available"})),m=(o=[l.ParcelStatus.RECEIVED,l.ParcelStatus.READY_FOR_PICKUP,l.ParcelStatus.PICKED_UP,l.ParcelStatus.OVERDUE],n=["small","medium","large"],i=["张三","李四","王五","赵六","钱七","孙八","周九","吴十"],Array.from({length:100},(t,e)=>{var a=o[Math.floor(Math.random()*o.length)],r=new Date(Date.now()-6048e5*Math.random()),c=a!==l.ParcelStatus.RECEIVED&&a!==l.ParcelStatus.PICKED_UP;return{id:e+1,tracking_number:"SF".concat(String(1234567890+e).padStart(12,"0")),pickup_code:"".concat(String.fromCharCode(65+Math.floor(26*Math.random()))).concat(String(1e4+e).slice(-5)),recipient_name:i[e%i.length],recipient_phone:"138".concat(String(1e7+e).slice(-8)),courier_company:S[e%S.length],size:n[e%3],weight:parseFloat((10*Math.random()+.5).toFixed(2)),status:a,shelf:c?h[e%50]:void 0,received_at:r.toISOString(),shelved_at:a!==l.ParcelStatus.RECEIVED?new Date(r.getTime()+18e5).toISOString():void 0,picked_up_at:a===l.ParcelStatus.PICKED_UP?new Date(r.getTime()+1728e5).toISOString():void 0,expected_overdue_at:a!==l.ParcelStatus.RECEIVED?new Date(r.getTime()+2592e5).toISOString():void 0,notes:e%5==0?"易碎品，请小心搬运":void 0};})),_=(c=[l.ShipmentStatus.PENDING,l.ShipmentStatus.SHIPPED,l.ShipmentStatus.DELIVERED],d=["广东省广州市天河区五山路381号","广东省深圳市南山区科技园","广东省珠海市香洲区情侣路","广东省佛山市顺德区大良街道"],Array.from({length:30},(t,e)=>{var a=c[Math.floor(Math.random()*c.length)],r=new Date(Date.now()-6048e5*Math.random());return{id:e+1,shipment_number:"SH".concat(new Date().getFullYear()).concat(String(e+1).padStart(8,"0")),sender_name:"张三",sender_phone:"13800138000",recipient_name:"收件人".concat(e+1),recipient_phone:"139".concat(String(1e7+e).slice(-8)),recipient_address:d[e%d.length],courier_company:S[e%S.length],weight:parseFloat((5*Math.random()+.5).toFixed(2)),volume:parseFloat((.05*Math.random()+.001).toFixed(3)),freight:parseFloat((20*Math.random()+10).toFixed(2)),status:a,created_at:r.toISOString(),shipped_at:a!==l.ShipmentStatus.PENDING?new Date(r.getTime()+36e5).toISOString():void 0};})),s={today:{received_count:150,picked_up_count:120,overdue_count:5},parcels:{total:1e3,received:100,shelved:50,ready:300,picked_up:500,overdue:30,returned:20},shelves:{total_capacity:2e3,total_used:1500,utilization_rate:75},recent_trends:Array.from({length:7},(t,e)=>{var a=new Date;return a.setDate(a.getDate()-(6-e)),{date:a.toISOString().split("T")[0],received:Math.floor(50*Math.random()+100),picked_up:Math.floor(50*Math.random()+80)};})};},"c00da6d7":function a(a,c,d,f){a._m(c);var e=a.i(d("0674cc3a")),i=a.i(d("ddc00f4e"));c.default=a.f(i)(a.f(e),[["__scopeId","data-v-9a63e565"]]);},"d00b0f38":function a(a,d,f,e){a._m(d);var _=a.i(f("790b5d0e")),b=a.i(f("ddc00f4e")),c=f("790b5d0e");a._e(d,c),d.default=a.f(b)(a.f(_),[["__scopeId","data-v-4fabaaaf"]]);},"d78dc10f":function f(f,d,a,e){f._m(d);var _=f.i(a("df1164f8")),c=f.i(a("ddc00f4e")),i=a("df1164f8");f._e(d,i),d.default=f.f(c)(f.f(_),[["__scopeId","data-v-2178ab6b"]]);},"d8dfe26b":function e(e,a,d,o){e._m(a),e.o(a,"getParcelList",()=>r),e.o(a,"getMyParcels",()=>i),e.o(a,"getParcelByPickupCode",()=>s),e.o(a,"getParcelByTrackingNumber",()=>c),e.o(a,"receiveParcel",()=>l),e.o(a,"shelveParcel",()=>v),e.o(a,"pickupParcel",()=>n),e.o(a,"getDashboardStatistics",()=>u);var t=e.i(d("def7c50a")),r=async a=>{try{var d,o,r,i;return await e.f(t).get("/parcels",{params:a});}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"获取包裹列表失败",data:void 0};}},i=async a=>{try{var d,o,r,i;return await e.f(t).get("/my-parcels",{params:a});}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"获取包裹列表失败",data:void 0};}},s=async a=>{try{var d,o,r,i;return await e.f(t).get("/parcels/by-pickup-code/".concat(a));}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||40002,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"包裹不存在",data:void 0};}},c=async a=>{try{var d,o,r,i;return await e.f(t).get("/parcels/by-tracking/".concat(a));}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||40002,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"包裹不存在",data:void 0};}},l=async a=>{try{var d,o,r,i;return await e.f(t).post("/parcels/receive",a);}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"入库失败",data:void 0};}},v=async a=>{try{var d,o,r,i;return await e.f(t).post("/parcels/".concat(a,"/shelve"));}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"上架失败",data:void 0};}},n=async a=>{try{var d,o,r,i;return await e.f(t).post("/parcels/pickup",a);}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"取件失败",data:void 0};}},u=async()=>{try{var a,d,o,r,i=await e.f(t).get("/dashboard/statistics");return 0===i.code&&i.data&&(i.data={today:{received_count:i.data.today.received_count,picked_up_count:i.data.today.picked_up_count,overdue_count:i.data.today.overdue_count},parcels:{total:i.data.parcels.total,received:i.data.parcels.received,shelved:i.data.parcels.shelved,ready:i.data.parcels.ready,picked_up:i.data.parcels.picked_up,overdue:i.data.parcels.overdue,returned:i.data.parcels.returned},shelves:{total_capacity:i.data.shelves.total_capacity,total_used:i.data.shelves.total_used,utilization_rate:i.data.shelves.utilization_rate},recent_trends:i.data.recent_trends.map(e=>({date:e.date,received:e.received,picked_up:e.picked_up}))}),i;}catch(e){return{code:(null===(d=e.response)||void 0===d?void 0:null===(a=d.data)||void 0===a?void 0:a.code)||5e4,message:(null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.message)||"获取统计数据失败",data:void 0};}};},"db7444c2":function e(e,a,n,i){e._m(a),e.o(a,"usePaginationConfig",()=>t);var o=n("9aaf3498");function t(e){return o.computed(()=>{var a=e();if(!a)return!1;var n=a.page,i=a.pageSize,o=a.total;return{page:n,pageSize:i,itemCount:o,showSizePicker:!0,pageSizes:[10,20,50],onUpdatePage:a.onChange,onUpdatePageSize:a.onSizeChange,prefix:()=>"共 ".concat(o," 条")};});}},"ddc00f4e":function r(r,a,t,e){r._m(a);var n=t("493f9ad4");t("c550eeaa"),t("2d08c2e5"),t("a3876e70"),a.default=(r,a)=>{var t=r.__vccOpts||r,e=!0,l=!1,c=void 0;try{for(var f,o=a[Symbol.iterator]();!(e=(f=o.next()).done);e=!0){var u=n._(f.value,2),v=u[0],i=u[1];t[v]=i;}}catch(r){l=!0,c=r;}finally{try{e||null==o.return||o.return();}finally{if(l)throw c;}}return t;};},"def7c50a":function e(e,o,r,a){e._m(o),r("b25dd2f8");var t=e.i(r("5a7ad514")),s=e.f(t).create({baseURL:e.meta.env.VITE_API_BASE_URL||"http://localhost:8000/v1",timeout:3e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{var o=localStorage.getItem("accessToken");return o&&(e.headers.Authorization="Bearer ".concat(o)),e;},e=>Promise.reject(e)),s.interceptors.response.use(e=>e.data,e=>{if(e.response)switch(e.response.status){case 401:localStorage.removeItem("accessToken"),localStorage.removeItem("userInfo"),"/login"!==window.location.pathname&&(window.location.href="/login");break;case 403:console.error("没有权限访问该资源");break;case 404:console.error("请求的资源不存在");break;case 500:console.error("服务器错误");break;default:console.error("请求失败:",e.response.data.message||"未知错误");}return Promise.reject(e);}),o.default=s;},"df6390f9":function f(f,c,d,a){f._m(c);var e=f.i(d("6f9dc2f6")),_=f.i(d("ddc00f4e")),i=d("6f9dc2f6");f._e(c,i),c.default=f.f(_)(f.f(e),[["__scopeId","data-v-c0a8c279"]]);},"ec0a1d90":function e(e,E,d,D){var r,P,i,n;e._m(E),e.o(E,"ParcelStatus",()=>r),e.o(E,"ShipmentStatus",()=>P),(i=r||(r={})).RECEIVED="received",i.READY_FOR_PICKUP="ready",i.PICKED_UP="picked_up",i.OVERDUE="overdue",i.RETURNED="returned",(n=P||(P={})).PENDING="pending",n.SHIPPED="shipped",n.DELIVERED="delivered",n.CANCELLED="cancelled";},});
//# sourceMappingURL=index_8959.b92a3f04.js.map