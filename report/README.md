# 数据库系统实验课程设计报告

**项目名称**: 校园"最后一公里"物流驿站管理系统

**日期**: 2025年12月18日

## 📁 文件结构

```
C:\Temp\db_report/
├── main.typ                    # 主文件(包含封面、目录、引用各章节)
├── assets/
│   └── sysu-logo.svg          # 中山大学校徽
├── chapters/                   # 各章节文件
│   ├── 00-abstract.typ        # 摘要
│   ├── 01-introduction.typ    # 第1章:引言
│   ├── 02-requirements.typ    # 第2章:系统需求分析
│   ├── 03-database-design.typ # 第3章:数据库设计(重点章节,约50%篇幅)
│   ├── 04-implementation.typ  # 第4章:系统详细设计与实现
│   ├── 05-testing.typ         # 第5章:系统测试与运行
│   ├── 06-conclusion.typ      # 第6章:总结与展望
│   └── 07-references.typ      # 第7章:参考文献
└── README.md                  # 本说明文档
```

## 📝 报告内容概述

本报告详细阐述了校园物流驿站管理系统的完整设计与实现过程,全文约**10,000字**,重点突出数据库高级特性的应用:

### 核心亮点

- ✅ **5个触发器**: 自动维护货架计数、状态日志、时间计算、容量检查
- ✅ **6个存储过程/函数**: 运费计算、货架分配、包裹入库/取件、取件码生成
- ✅ **5个视图**: 统计分析、数据脱敏、业务查询简化
- ✅ **15+高级索引**: 部分索引、复合索引、表达式索引、GIN索引、BRIN索引
- ✅ **事务控制**: 隔离级别、行级锁、保存点
- ✅ **分区表**: 日志表按月分区,优化历史数据管理

### 技术栈

- **后端**: Go + Gin + GORM + PostgreSQL
- **前端**: Vue 3 + TypeScript + NaiveUI
- **架构**: RESTful API + 分层架构(Handler-Service-Repository)

## 🔧 编译方法

### 方式1: 使用Typst CLI(推荐)

1. **安装Typst**:
   ```bash
   # Windows (使用Scoop)
   scoop install typst

   # macOS (使用Homebrew)
   brew install typst

   # Linux
   curl -fsSL https://typst.app/install.sh | sh
   ```

2. **编译为PDF**:
   ```bash
   cd C:\Temp\db_report
   typst compile main.typ
   ```

   编译完成后会生成 `main.pdf` 文件。

3. **监听模式**(修改后自动重新编译):
   ```bash
   typst watch main.typ
   ```

### 方式2: 使用Typst Web App

1. 访问 https://typst.app/
2. 创建新项目
3. 上传所有文件(保持目录结构)
4. 在线预览和编译为PDF

### 方式3: 使用VS Code插件

1. 安装VS Code扩展: **Typst LSP**
2. 打开 `main.typ` 文件
3. 使用快捷键编译:
   - Windows/Linux: `Ctrl+Shift+P` → "Typst: Export current file to PDF"
   - macOS: `Cmd+Shift+P` → "Typst: Export current file to PDF"

## 📊 报告章节说明

### 第0章: 摘要
项目简介、关键技术、主要功能和关键词。

### 第1章: 引言(约2500字)
- 1.1 项目背景:校园快递管理现状与问题
- 1.2 设计目的:课程要求与实际需求
- 1.3 技术选型:后端、前端、数据库技术栈及选型理由
- 1.4 项目组织:单人项目说明
- 1.5 报告组织结构

### 第2章: 系统需求分析(约2000字)
- 2.1 业务流程分析:包裹入库、取件、滞留处理、寄件流程
- 2.2 功能需求:8个功能模块详细说明
- 2.3 非功能需求:性能、安全、可扩展性、可维护性要求

### 第3章: 数据库设计(约5000字,占50%篇幅) ⭐**重点章节**
- 3.1 概念结构设计:E-R图、实体定义、实体关系
- 3.2 逻辑结构设计:关系模式、范式分析(3NF验证)
- 3.3 物理结构设计:表结构、数据类型、完整性约束
- 3.4 **PostgreSQL高级特性应用**(核心部分):
  - 3.4.1 触发器(5个):详细展示设计和实现
  - 3.4.2 存储过程/函数(6个):封装复杂业务逻辑
  - 3.4.3 视图(5个):统计分析、数据脱敏
  - 3.4.4 高级索引(15+):部分、复合、表达式、GIN、BRIN索引
  - 3.4.5 事务控制:隔离级别、行级锁、保存点
  - 3.4.6 分区表:日志表按月分区
- 3.5 数据库设计总结:高级特性应用统计、设计亮点

### 第4章: 系统详细设计与实现(约1800字)
- 4.1 系统架构实现:分层架构、依赖注入
- 4.2 核心功能模块实现:包裹入库/取件、货架分配、运费计算、滞留处理
- 4.3 API接口设计:RESTful规范、统一响应格式
- 4.4 性能优化措施:数据库层、应用层、前端优化

### 第5章: 系统测试与运行(约1500字)
- 5.1 测试环境:硬件和软件配置
- 5.2 功能测试:5个模块的测试用例和结果
- 5.3 性能测试:响应时间、并发能力、吞吐量测试
- 5.4 遇到的问题及解决方案:5个典型问题的分析和解决
- 5.5 系统运行展示:界面和功能说明(预留截图位置)

### 第6章: 总结与展望(约1200字)
- 6.1 项目总结:完成情况、技术收获、难点回顾
- 6.2 系统特色:PostgreSQL高级特性、架构设计、性能优化
- 6.3 系统不足:已知问题和局限性
- 6.4 未来改进方向:功能扩展、技术升级、性能提升、运维保障

### 第7章: 参考文献
20篇参考文献,包括官方文档、技术书籍、RFC标准等。

## 📷 截图说明

报告中预留了截图位置,标注为 `// TODO: 插入截图 - 描述`。需要插入以下截图:

### 第5章需要的截图:
1. 用户登录界面
2. 包裹入库成功提示(显示取件码和货架)
3. 包裹列表(展示多个包裹状态)
4. 货架利用率展示
5. 滞留件管理界面
6. JMeter测试结果图表(响应时间分布)
7. 数据库查询性能分析(EXPLAIN ANALYZE)
8. pgAdmin中的慢查询日志
9. 系统资源使用监控(CPU、内存)

### 插入截图的方法:

在Typst中插入图片:
```typst
#figure(
  image("path/to/screenshot.png", width: 80%),
  caption: [图片标题],
)
```

建议:
1. 将截图保存到 `assets/screenshots/` 目录
2. 使用有意义的文件名,如 `login-interface.png`
3. 图片格式推荐PNG或JPG
4. 建议宽度设置为60%-90%

## 📈 统计信息

- **总字数**: 约10,000字(不含代码)
- **代码示例**: 约30个核心代码片段(每个10-20行)
- **表格**: 15+个
- **章节数**: 7章(不含摘要)
- **数据库高级特性**:
  - 触发器: 5个
  - 存储过程/函数: 6个
  - 视图: 5个
  - 高级索引: 15+种
  - 其他特性: 事务控制、分区表、完整性约束等

## ✅ 报告特点

1. **内容全面**: 涵盖需求分析、数据库设计、系统实现、测试等完整流程
2. **重点突出**: 第3章(数据库设计)占50%篇幅,深入展示PostgreSQL高级特性
3. **代码精简**: 每个功能模块只展示10-20行核心代码,突出关键逻辑
4. **格式规范**: 使用Typst排版,格式统一,层次清晰
5. **模块化设计**: 每章独立文件,便于维护和修改
6. **学术规范**: 语言正式客观,参考文献格式规范

## 🔍 注意事项

1. **字体要求**: 报告使用"思源宋体(Source Han Serif SC)",请确保系统已安装该字体。如未安装,Typst会使用默认字体。

2. **图表渲染**: 报告中的表格使用Typst原生语法,编译时会自动渲染。

3. **代码高亮**: 代码块会自动进行语法高亮,支持SQL、Go等多种语言。

4. **页码和目录**: 页码和目录会自动生成,无需手动维护。

5. **修改建议**:
   - 如需修改内容,直接编辑对应的章节文件即可
   - 修改后重新编译 `main.typ` 即可看到更新
   - 添加截图时,需要更新对应章节文件中的图片路径

## 📞 技术支持

如有问题,请参考:
- Typst官方文档: https://typst.app/docs
- Typst中文社区: https://typst-doc-cn.github.io/docs/
- PostgreSQL文档: https://www.postgresql.org/docs/17/

## 📄 许可

本报告为课程设计作业,仅供学习参考使用。

---

**最后更新**: 2025年12月18日
