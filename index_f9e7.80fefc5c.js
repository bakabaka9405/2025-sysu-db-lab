(function(_){var filename = ((function(){var _documentCurrentScript = typeof document !== "undefined" ? document.currentScript : null;return typeof document === "undefined" ? require("url").pathToFileURL(__filename).href : _documentCurrentScript && _documentCurrentScript.src || new URL("index_f9e7.js", document.baseURI).href})());for(var r in _){_[r].__farm_resource_pot__=filename;window['6a0c116a218a403c6f0e6f69157a05cf'].__farm_module_system__.register(r,_[r])}})({"0674cc3a":function e(e,t,a,l){e._m(t);var r=a("9aaf3498"),u=a("9aaf3498"),d=a("9aaf3498"),i=a("1f6a8afd"),n=a("d8dfe26b"),o={class:"page-container"};t.default=r.defineComponent({__name:"MyParcels",setup(e){var t=i.useMessage(),a=d.ref(!1),l=d.ref([]),r=d.ref(0),p=d.ref(1),s=d.ref(20),v=d.ref(null);d.ref("");var c=[{label:"全部",value:""},{label:"待取件",value:"ready"},{label:"已取件",value:"picked_up"},{label:"滞留",value:"overdue"}],f={received:{text:"待上架",type:"info"},ready:{text:"待取件",type:"success"},picked_up:{text:"已取件",type:"default"},overdue:{text:"滞留",type:"warning"},returned:{text:"已退回",type:"error"}},y=[{title:"取件码",key:"pickup_code",width:100,render:e=>d.h("strong",{style:"color: #18a058; font-size: 16px;"},e.pickup_code)},{title:"快递单号",key:"tracking_number",width:150},{title:"快递公司",key:"courier_company",width:100},{title:"货架位置",key:"shelf",width:120,render:e=>{var t;return(null===(t=e.shelf)||void 0===t?void 0:t.shelf_code)||"-";}},{title:"状态",key:"status",width:100,render:e=>{var t=f[e.status]||{text:e.status,type:"default"};return d.h(i.NTag,{type:t.type},{default:()=>t.text});}},{title:"入库时间",key:"received_at",width:160,render:e=>new Date(e.received_at).toLocaleString("zh-CN")},{title:"备注",key:"notes",ellipsis:{tooltip:!0}}],g=async()=>{a.value=!0;var e=await n.getMyParcels({status:v.value||void 0,page:p.value,page_size:s.value});0===e.code&&e.data?(l.value=e.data.list,r.value=e.data.pagination.total):t.error(e.message||"加载失败"),a.value=!1;},h=e=>{p.value=e,g();},_=()=>{p.value=1,g();};return d.onMounted(()=>{g();}),(e,t)=>(u.openBlock(),u.createElementBlock("div",o,[u.createVNode(u.unref(i.NCard),{title:"我的包裹"},{default:u.withCtx(()=>[u.createVNode(u.unref(i.NSpace),{style:{"margin-bottom":"16px"}},{default:u.withCtx(()=>[u.createVNode(u.unref(i.NSelect),{value:v.value,"onUpdate:value":[t[0]||(t[0]=e=>v.value=e),_],options:c,placeholder:"状态筛选",style:{width:"150px"}},null,8,["value"])]),_:1}),u.createVNode(u.unref(i.NDataTable),{columns:y,data:l.value,loading:a.value,pagination:{page:p.value,pageSize:s.value,itemCount:r.value,onUpdatePage:h},"scroll-x":1e3},null,8,["data","loading","pagination"])]),_:1})]));}});},"1af7f2eb":function e(e,d,o,a){e._m(d),e.o(d,"getOverdueList",()=>i),e.o(d,"sendReminder",()=>n),e.o(d,"batchReturn",()=>r),e.o(d,"checkOverdue",()=>t);var v=e.i(o("def7c50a")),i=async d=>{try{var o,a,i,n;return await e.f(v).get("/overdue",{params:d});}catch(e){return{code:(null===(a=e.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.code)||5e4,message:(null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)||"获取滞留件列表失败",data:void 0};}},n=async d=>{try{var o,a,i,n;return await e.f(v).post("/overdue/".concat(d,"/remind"));}catch(e){return{code:(null===(a=e.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.code)||5e4,message:(null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)||"发送提醒失败",data:void 0};}},r=async d=>{try{var o,a,i,n;return await e.f(v).post("/overdue/batch-return",{ids:d});}catch(e){return{code:(null===(a=e.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.code)||5e4,message:(null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)||"批量退回失败",data:void 0};}},t=async()=>{try{var d,o,a,i;return await e.f(v).post("/overdue/check");}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(a=i.data)||void 0===a?void 0:a.message)||"检查失败",data:void 0};}};},"2025bacc":function e(e,a,t,i){e._m(a),e.o(a,"getMyShipments",()=>d),e.o(a,"createShipment",()=>s),e.o(a,"calculateFreight",()=>l),e.o(a,"getCourierCompanies",()=>n);var o=e.i(t("def7c50a")),d=async a=>{try{var t,i,d,s;return await e.f(o).get("/my-shipments",{params:a});}catch(e){return{code:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.code)||5e4,message:(null===(s=e.response)||void 0===s?void 0:null===(d=s.data)||void 0===d?void 0:d.message)||"获取寄件单列表失败",data:void 0};}},s=async a=>{try{var t,i,d,s;return await e.f(o).post("/shipments",a);}catch(e){return{code:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.code)||5e4,message:(null===(s=e.response)||void 0===s?void 0:null===(d=s.data)||void 0===d?void 0:d.message)||"创建失败",data:void 0};}},l=async a=>{try{var t,i,d,s,l=await e.f(o).post("/shipments/calculate-freight",a);return 0===l.code&&l.data&&(l.data={freight:l.data.freight,calculation_details:{base_freight:l.data.calculation_details.base_freight,weight_freight:l.data.calculation_details.weight_freight,volume_freight:l.data.calculation_details.volume_freight}}),l;}catch(e){return{code:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.code)||5e4,message:(null===(s=e.response)||void 0===s?void 0:null===(d=s.data)||void 0===d?void 0:d.message)||"计算失败",data:void 0};}},n=async()=>{try{return await e.f(o).get("/courier-companies");}catch(e){var a,t,i,d;return{code:(null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.code)||5e4,message:(null===(d=e.response)||void 0===d?void 0:null===(i=d.data)||void 0===i?void 0:i.message)||"获取快递公司列表失败",data:void 0};}};},"227faad3":function e(e,f,a,c){e._m(f);var d=e.i(a("6e9a68c3")),_=e.i(a("ddc00f4e")),i=a("6e9a68c3");e._e(f,i),f.default=e.f(_)(e.f(d),[["__scopeId","data-v-1e44f2f7"]]);},"2a33264b":function e(e,a,l,t){e._m(a),l("2554870f"),l("c98af605");var o=l("9aaf3498"),r=l("9aaf3498"),n=l("9aaf3498"),u=l("a0cf2c50"),i=l("69191e11"),d=l("1f6a8afd"),c=l("8a685886"),s={class:"sider-content"},v={class:"brand-header"},p={key:0,class:"brand-title"},h={key:1,class:"brand-title-collapsed"},f={class:"user-profile"},m={key:0,class:"username"};a.default=o.defineComponent({__name:"MainLayout",setup(e){var a=u.useRouter(),l=u.useRoute(),t=i.useUserStore();t.initFromStorage();var o=n.ref(!1),y=n.ref(!0),k=n.ref(""),N=n.computed(()=>t.userInfo),b=n.computed(()=>{var e,a=null===(e=N.value)||void 0===e?void 0:e.role;return"staff"===a||"admin"===a;}),g=n.computed(()=>{var e=[{label:"仪表盘",key:"/dashboard",icon:()=>n.h(c.HomeOutline)},{label:"包裹查询",key:"/search",icon:()=>n.h(c.SearchOutline)}];return b.value||e.push({label:"我的包裹",key:"/my-parcels",icon:()=>n.h(c.CubeOutline)},{label:"我的寄件",key:"/my-shipments",icon:()=>n.h(c.SendOutline)}),b.value&&(e.push({label:"包裹管理",key:"/parcel-management",icon:()=>n.h(c.BarChartOutline)}),e.push({label:"货架管理",key:"/shelf-management",icon:()=>n.h(c.GridOutline)}),e.push({label:"滞留件管理",key:"/overdue-management",icon:()=>n.h(c.AlertCircleOutline)})),e;}),w=[{label:"个人中心",key:"profile"},{label:"退出登录",key:"logout"}];n.watch(o,e=>{e?y.value=!1:setTimeout(()=>{y.value=!0;},100);}),n.watch(()=>l.path,e=>{k.value=e;},{immediate:!0});var C=e=>{a.push(e);},V=e=>{"profile"===e?a.push("/profile"):"logout"===e&&(t.logout(),a.push("/login"));};return n.onMounted(()=>{if(!t.isLoggedIn){a.push("/login");return;}var e=a.currentRoute.value.path;g.value.map(e=>e.key).includes(e)?k.value=e:k.value="/dashboard";}),(e,a)=>{var l=r.resolveComponent("router-view");return r.openBlock(),r.createBlock(r.unref(d.NLayout),{class:"main-layout","has-sider":""},{default:r.withCtx(()=>[r.createVNode(r.unref(d.NLayoutSider),{bordered:"","collapse-mode":"width","collapsed-width":64,width:240,"show-trigger":"",collapsed:o.value,"onUpdate:collapsed":a[1]||(a[1]=e=>o.value=e),"native-scrollbar":!1},{default:r.withCtx(()=>[r.createElementVNode("div",s,[r.createElementVNode("div",v,[o.value?(r.openBlock(),r.createElementBlock("h2",h,"物流")):(r.openBlock(),r.createElementBlock("h2",p,"校园物流"))]),r.createVNode(r.unref(d.NMenu),{value:k.value,"onUpdate:value":[a[0]||(a[0]=e=>k.value=e),C],options:g.value,"collapsed-width":64,"collapsed-icon-size":22},null,8,["value","options"]),r.createElementVNode("div",f,[r.createVNode(r.unref(d.NDropdown),{options:w,onSelect:V},{default:r.withCtx(()=>[r.createVNode(r.unref(d.NSpace),{align:"center"},{default:r.withCtx(()=>{var e,a;return[r.createVNode(r.unref(d.NAvatar),{round:"",size:32,style:{backgroundColor:"#18a058",color:"#fff"}},{default:r.withCtx(()=>{var e,a;return[r.createTextVNode(r.toDisplayString((null===(a=N.value)||void 0===a?void 0:null===(e=a.username)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"),1)];}),_:1}),!o.value&&y.value?(r.openBlock(),r.createElementBlock("span",m,r.toDisplayString((null===(e=N.value)||void 0===e?void 0:e.realName)||(null===(a=N.value)||void 0===a?void 0:a.username)),1)):r.createCommentVNode("",!0)];}),_:1})]),_:1})])])]),_:1},8,["collapsed"]),r.createVNode(r.unref(d.NLayout),null,{default:r.withCtx(()=>[r.createVNode(r.unref(d.NLayoutContent),{"content-style":"padding: 24px;"},{default:r.withCtx(()=>[r.createVNode(l)]),_:1})]),_:1})]),_:1});};}});},"33a636cf":function e(e,d,o,a){e._m(d),e.o(d,"getShelfList",()=>t),e.o(d,"createShelf",()=>i),e.o(d,"updateShelf",()=>v),e.o(d,"deleteShelf",()=>l),e.o(d,"getShelfStatistics",()=>n);var s=e.i(o("def7c50a")),t=async d=>{try{var o,a,t,i;return await e.f(s).get("/shelves",{params:d});}catch(e){return{code:(null===(a=e.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.message)||"获取货架列表失败",data:void 0};}},i=async d=>{try{var o,a,t,i;return await e.f(s).post("/shelves",d);}catch(e){return{code:(null===(a=e.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.message)||"创建货架失败",data:void 0};}},v=async(d,o)=>{try{var a,t,i,v;return await e.f(s).put("/shelves/".concat(d),o);}catch(e){return{code:(null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.code)||5e4,message:(null===(v=e.response)||void 0===v?void 0:null===(i=v.data)||void 0===i?void 0:i.message)||"更新货架失败",data:void 0};}},l=async d=>{try{var o,a,t,i;return await e.f(s).delete("/shelves/".concat(d));}catch(e){return{code:(null===(a=e.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.message)||"删除货架失败",data:void 0};}},n=async()=>{try{var d,o,a,t;return await e.f(s).get("/shelves/statistics");}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||"获取统计数据失败",data:void 0};}};},"37ef8574":function e(e,a,o,d){e._m(a),e.o(a,"register",()=>t),e.o(a,"login",()=>r),e.o(a,"getProfile",()=>s),e.o(a,"updateProfile",()=>l);var i=e.i(o("def7c50a")),t=async a=>{try{return await e.f(i).post("/register",a);}catch(e){var o,d,t,r;return{code:(null===(d=e.response)||void 0===d?void 0:null===(o=d.data)||void 0===o?void 0:o.code)||5e4,message:(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"注册失败",data:void 0};}},r=async a=>{try{var o,d,t,r,s=await e.f(i).post("/login",a);return 0===s.code&&s.data&&(localStorage.setItem("accessToken",s.data.accessToken),localStorage.setItem("userInfo",JSON.stringify(s.data.user))),s;}catch(e){return{code:(null===(d=e.response)||void 0===d?void 0:null===(o=d.data)||void 0===o?void 0:o.code)||5e4,message:(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"登录失败",data:void 0};}},s=async()=>{try{return await e.f(i).get("/user");}catch(e){var a,o,d,t;return{code:(null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.code)||5e4,message:(null===(t=e.response)||void 0===t?void 0:null===(d=t.data)||void 0===d?void 0:d.message)||"获取用户信息失败",data:void 0};}},l=async a=>{try{var o,d,t,r,s=await e.f(i).put("/user",a);if(0===s.code){var l=localStorage.getItem("userInfo");if(l){var n=JSON.parse(l);n.realName=a.realName,void 0!==a.email&&(n.email=a.email),localStorage.setItem("userInfo",JSON.stringify(n));}}return s;}catch(e){return{code:(null===(d=e.response)||void 0===d?void 0:null===(o=d.data)||void 0===o?void 0:o.code)||5e4,message:(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"更新失败",data:void 0};}};},"3e061461":function c(c,d,f,a){c._m(d);var e=c.i(f("64c6cf1d")),_=c.i(f("ddc00f4e")),i=f("64c6cf1d");c._e(d,i),d.default=c.f(_)(c.f(e),[["__scopeId","data-v-2759cb38"]]);},"469b4b14":function f(f,d,a,c){f._m(d);var e=f.i(a("875cfa3f")),_=f.i(a("ddc00f4e")),i=a("875cfa3f");f._e(d,i),d.default=f.f(_)(f.f(e),[["__scopeId","data-v-6d040c7d"]]);},"65fc1a6b":function e(e,a,t,r){e._m(a);var n=t("a0cf2c50"),m=e.i(t("92b274a6")),o=e.i(t("469b4b14")),i=e.i(t("df6390f9")),f=e.i(t("665ae886")),s=e.i(t("3e061461")),c=e.i(t("66391d89")),h=e.i(t("c00da6d7")),p=e.i(t("d00b0f38")),u=e.i(t("227faad3")),l=e.i(t("d78dc10f")),d=e.i(t("87888e01")),g=e.i(t("8fd984f4")),q=[{path:"/",name:"Home",component:e.f(m),meta:{requiresAuth:!1}},{path:"/login",name:"Login",component:e.f(o),meta:{requiresAuth:!1}},{path:"/register",name:"Register",component:e.f(i),meta:{requiresAuth:!1}},{path:"/",component:e.f(f),meta:{requiresAuth:!0},children:[{path:"dashboard",name:"Dashboard",component:e.f(s)},{path:"search",name:"Search",component:e.f(c),meta:{requiresAuth:!1}},{path:"my-parcels",name:"MyParcels",component:e.f(h),meta:{requiresUser:!0}},{path:"my-shipments",name:"MyShipments",component:e.f(p),meta:{requiresUser:!0}},{path:"parcel-management",name:"ParcelManagement",component:e.f(u),meta:{requiresStaff:!0}},{path:"shelf-management",name:"ShelfManagement",component:e.f(l),meta:{requiresStaff:!0}},{path:"overdue-management",name:"OverdueManagement",component:e.f(d),meta:{requiresStaff:!0}},{path:"profile",name:"Profile",component:e.f(g)}]}],S=n.createRouter({history:n.createWebHashHistory(),routes:q});S.beforeEach((e,a,t)=>{var r=localStorage.getItem("accessToken"),n=localStorage.getItem("userInfo"),m=null;if(n)try{m=JSON.parse(n);}catch(e){t({name:"Login"});return;}if(e.meta.requiresAuth&&!r){t({name:"Login"});return;}if(e.meta.requiresStaff&&(!m||"staff"!==m.role&&"admin"!==m.role)){t({name:"Home"});return;}if(e.meta.requiresUser&&(!m||"staff"===m.role||"admin"===m.role)||"Home"===e.name&&r){t({name:"Dashboard"});return;}t();}),a.default=S;},"66391d89":function d(d,a,e,f){d._m(a);var _=d.i(e("2dd52d78")),c=d.i(e("ddc00f4e")),i=e("2dd52d78");d._e(a,i),a.default=d.f(c)(d.f(_),[["__scopeId","data-v-dd8eda39"]]);},"665ae886":function a(a,f,d,b){a._m(f);var e=a.i(d("2a33264b")),_=a.i(d("ddc00f4e")),c=d("2a33264b");a._e(f,c),f.default=a.f(_)(a.f(e),[["__scopeId","data-v-f43b152b"]]);},"69191e11":function e(e,o,a,r){e._m(o),e.o(o,"useUserStore",()=>s);var t=a("0e70da6a"),l=a("9aaf3498"),s=t.defineStore("user",()=>{var e=l.ref(null),o=l.ref(""),a=l.computed(()=>!!o.value);return{userInfo:e,accessToken:o,isLoggedIn:a,setToken:e=>{o.value=e,localStorage.setItem("accessToken",e);},setUserInfo:o=>{e.value=o,localStorage.setItem("userInfo",JSON.stringify(o));},logout:()=>{e.value=null,o.value="",localStorage.removeItem("accessToken"),localStorage.removeItem("userInfo");},initFromStorage:()=>{var a=localStorage.getItem("accessToken"),r=localStorage.getItem("userInfo");if(a&&(o.value=a),r)try{e.value=JSON.parse(r);}catch(e){console.error("Failed to parse user info from localStorage");}}};});},"7d33ac30":function c(c,f,a,i){c._m(f);var n=c.i(a("89380c7c"));f.default=c.f(n);},"875cfa3f":function e(e,a,t,r){e._m(a),t("850e6c49"),t("2d08c2e5"),t("a3876e70");var l=t("9aaf3498"),o=t("9aaf3498"),n=t("9aaf3498"),s=t("a0cf2c50"),d=t("1f6a8afd"),c=t("37ef8574"),u=t("69191e11"),i={class:"login-container"},m={class:"login-content"},f={class:"login-left"},p={class:"form-actions"},v={class:"form-links"},N={class:"link-text"};a.default=l.defineComponent({__name:"Login",setup(e){var a=s.useRouter(),t=d.useMessage(),r=u.useUserStore(),l=n.ref(null),g=n.ref(!1),h=n.ref({usernameOrPhone:"",password:""}),V={usernameOrPhone:{required:!0,message:"请输入用户名或手机号",trigger:["blur","input"],validator:(e,a)=>!!a&&(!!/^1[3-9]\d{9}$/.test(a)||!!/^[a-zA-Z0-9_]{3,20}$/.test(a))},password:{required:!0,message:"请输入密码",trigger:["blur","input"]}},w=async()=>{if(!g.value){g.value=!0;var e=await c.login(h.value);0===e.code&&e.data?(r.setToken(e.data.accessToken),r.setUserInfo(e.data.user),t.success("登录成功"),a.push("/")):t.error(e.message||"用户名或密码错误"),setTimeout(()=>{g.value=!1;},1e3);}};return(e,a)=>{var t=o.resolveComponent("router-link");return o.openBlock(),o.createElementBlock("div",i,[o.createElementVNode("div",m,[o.createElementVNode("div",f,[o.createVNode(o.unref(d.NCard),{class:"login-card",bordered:!1},{default:o.withCtx(()=>[a[4]||(a[4]=o.createElementVNode("div",{class:"login-header"},[o.createElementVNode("h2",{class:"login-title"},"欢迎回来"),o.createElementVNode("p",{class:"login-subtitle"},"请登录您的账号")],-1)),o.createVNode(o.unref(d.NForm),{ref_key:"formRef",ref:l,model:h.value,"label-placement":"left","label-width":"0","require-mark-placement":"right-hanging",rules:V},{default:o.withCtx(()=>[o.createVNode(o.unref(d.NFormItem),{path:"usernameOrPhone"},{default:o.withCtx(()=>[o.createVNode(o.unref(d.NInput),{value:h.value.usernameOrPhone,"onUpdate:value":a[0]||(a[0]=e=>h.value.usernameOrPhone=e),placeholder:"用户名或手机号",size:"large"},null,8,["value"])]),_:1}),o.createVNode(o.unref(d.NFormItem),{path:"password"},{default:o.withCtx(()=>[o.createVNode(o.unref(d.NInput),{value:h.value.password,"onUpdate:value":a[1]||(a[1]=e=>h.value.password=e),type:"password",placeholder:"密码",size:"large","show-password-on":"click",onKeyup:o.withKeys(w,["enter"])},null,8,["value"])]),_:1}),o.createElementVNode("div",p,[o.createVNode(o.unref(d.NButton),{type:"primary",size:"large",block:"",loading:g.value,onClick:w},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(g.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),o.createElementVNode("div",v,[o.createElementVNode("p",N,[a[3]||(a[3]=o.createTextVNode(" 还没有账号？ ",-1)),o.createVNode(t,{to:"/register",class:"link"},{default:o.withCtx(()=>[...a[2]||(a[2]=[o.createTextVNode("立即注册",-1)])]),_:1})])])]),_:1},8,["model"])]),_:1})]),a[5]||(a[5]=o.createElementVNode("div",{class:"login-right"},[o.createElementVNode("div",{class:"brand-content"},[o.createElementVNode("h1",{class:"brand-title"},"校园物流系统"),o.createElementVNode("p",{class:"brand-description"},"便捷、高效、安全的校园物流服务平台")])],-1))])]);};}});},"87888e01":function d(d,a,e,f){d._m(a);var _=d.i(e("95a3a9ed")),c=d.i(e("ddc00f4e")),i=e("95a3a9ed");d._e(a,i),a.default=d.f(c)(d.f(_),[["__scopeId","data-v-b2807ded"]]);},"89380c7c":function e(e,t,a,r){e._m(t);var o=a("9aaf3498"),n=a("9aaf3498"),f=a("1f6a8afd");t.default=o.defineComponent({__name:"App",setup:e=>(e,t)=>{var a=n.resolveComponent("router-view");return n.openBlock(),n.createBlock(n.unref(f.NMessageProvider),null,{default:n.withCtx(()=>[n.createVNode(n.unref(f.NDialogProvider),null,{default:n.withCtx(()=>[n.createVNode(n.unref(f.NNotificationProvider),null,{default:n.withCtx(()=>[n.createVNode(a)]),_:1})]),_:1})]),_:1});}});},"8fd984f4":function c(c,d,e,f){c._m(d);var a=c.i(e("e9accfd2")),_=c.i(e("ddc00f4e")),i=e("e9accfd2");c._e(d,i),d.default=c.f(_)(c.f(a),[["__scopeId","data-v-130e4963"]]);},"92b274a6":function d(d,a,e,f){d._m(a);var b=d.i(e("3d2274bb")),_=d.i(e("ddc00f4e")),c=e("3d2274bb");d._e(a,c),a.default=d.f(_)(d.f(b),[["__scopeId","data-v-fa1ae1de"]]);},"953dfae2":function a(a,e,c,f){a._m(e);var i=c("9aaf3498"),n=c("0e70da6a"),p=a.i(c("7d33ac30")),t=a.i(c("65fc1a6b")),u=i.createApp(a.f(p)),r=n.createPinia();u.use(r),u.use(a.f(t)),u.mount("#app");},"b90d6007":function t(t,e,a,r){t._m(e),t.o(e,"COURIER_COMPANIES",()=>S),t.o(e,"MOCK_SHELVES",()=>h),t.o(e,"MOCK_PARCELS",()=>m),t.o(e,"MOCK_SHIPMENTS",()=>_),t.o(e,"MOCK_DASHBOARD_STATISTICS",()=>s),a("6ae72255"),a("b87694ce"),a("bf3a4d74"),a("db38ec0f"),a("e57b3270"),a("850e6c49");var o,n,i,c,d,l=a("ec0a1d90"),S=["顺丰速运","中通快递","圆通速递","申通快递","韵达快递","邮政EMS","京东物流","德邦快递"],h=Array.from({length:50},(t,e)=>({id:e+1,shelf_code:"".concat(String.fromCharCode(65+Math.floor(e/10)),"-").concat(String(Math.floor(e%10/5)+1).padStart(2,"0"),"-").concat(String(e%5+1).padStart(2,"0")),area:String.fromCharCode(65+Math.floor(e/10)),floor:Math.floor(e%10/5)+1,column:e%5+1,type:["small","medium","large"][e%3],capacity:[20,15,10][e%3],current_count:Math.floor(Math.random()*[20,15,10][e%3]),status:"available"})),m=(o=[l.ParcelStatus.RECEIVED,l.ParcelStatus.READY_FOR_PICKUP,l.ParcelStatus.PICKED_UP,l.ParcelStatus.OVERDUE],n=["small","medium","large"],i=["张三","李四","王五","赵六","钱七","孙八","周九","吴十"],Array.from({length:100},(t,e)=>{var a=o[Math.floor(Math.random()*o.length)],r=new Date(Date.now()-6048e5*Math.random()),c=a!==l.ParcelStatus.RECEIVED&&a!==l.ParcelStatus.PICKED_UP;return{id:e+1,tracking_number:"SF".concat(String(1234567890+e).padStart(12,"0")),pickup_code:"".concat(String.fromCharCode(65+Math.floor(26*Math.random()))).concat(String(1e4+e).slice(-5)),recipient_name:i[e%i.length],recipient_phone:"138".concat(String(1e7+e).slice(-8)),courier_company:S[e%S.length],size:n[e%3],weight:parseFloat((10*Math.random()+.5).toFixed(2)),status:a,shelf:c?h[e%50]:void 0,received_at:r.toISOString(),shelved_at:a!==l.ParcelStatus.RECEIVED?new Date(r.getTime()+18e5).toISOString():void 0,picked_up_at:a===l.ParcelStatus.PICKED_UP?new Date(r.getTime()+1728e5).toISOString():void 0,expected_overdue_at:a!==l.ParcelStatus.RECEIVED?new Date(r.getTime()+2592e5).toISOString():void 0,notes:e%5==0?"易碎品，请小心搬运":void 0};})),_=(c=[l.ShipmentStatus.PENDING,l.ShipmentStatus.SHIPPED,l.ShipmentStatus.DELIVERED],d=["广东省广州市天河区五山路381号","广东省深圳市南山区科技园","广东省珠海市香洲区情侣路","广东省佛山市顺德区大良街道"],Array.from({length:30},(t,e)=>{var a=c[Math.floor(Math.random()*c.length)],r=new Date(Date.now()-6048e5*Math.random());return{id:e+1,shipment_number:"SH".concat(new Date().getFullYear()).concat(String(e+1).padStart(8,"0")),sender_name:"张三",sender_phone:"13800138000",recipient_name:"收件人".concat(e+1),recipient_phone:"139".concat(String(1e7+e).slice(-8)),recipient_address:d[e%d.length],courier_company:S[e%S.length],weight:parseFloat((5*Math.random()+.5).toFixed(2)),volume:parseFloat((.05*Math.random()+.001).toFixed(3)),freight:parseFloat((20*Math.random()+10).toFixed(2)),status:a,created_at:r.toISOString(),shipped_at:a!==l.ShipmentStatus.PENDING?new Date(r.getTime()+36e5).toISOString():void 0};})),s={today:{received_count:150,picked_up_count:120,overdue_count:5},parcels:{total:1e3,received:100,shelved:50,ready:300,picked_up:500,overdue:30,returned:20},shelves:{total_capacity:2e3,total_used:1500,utilization_rate:75},recent_trends:Array.from({length:7},(t,e)=>{var a=new Date;return a.setDate(a.getDate()-(6-e)),{date:a.toISOString().split("T")[0],received:Math.floor(50*Math.random()+100),picked_up:Math.floor(50*Math.random()+80)};})};},"c00da6d7":function c(c,a,d,f){c._m(a);var e=c.i(d("0674cc3a")),i=c.i(d("ddc00f4e"));a.default=c.f(i)(c.f(e),[["__scopeId","data-v-600c92b8"]]);},"d00b0f38":function d(d,e,f,a){d._m(e);var _=d.i(f("790b5d0e")),c=d.i(f("ddc00f4e")),i=f("790b5d0e");d._e(e,i),e.default=d.f(c)(d.f(_),[["__scopeId","data-v-46537198"]]);},"d78dc10f":function f(f,d,a,c){f._m(d);var e=f.i(a("df1164f8")),_=f.i(a("ddc00f4e")),i=a("df1164f8");f._e(d,i),d.default=f.f(_)(f.f(e),[["__scopeId","data-v-1bc29681"]]);},"d8dfe26b":function e(e,a,d,o){e._m(a),e.o(a,"getParcelList",()=>r),e.o(a,"getMyParcels",()=>i),e.o(a,"getParcelByPickupCode",()=>s),e.o(a,"getParcelByTrackingNumber",()=>c),e.o(a,"receiveParcel",()=>l),e.o(a,"shelveParcel",()=>v),e.o(a,"pickupParcel",()=>n),e.o(a,"getDashboardStatistics",()=>u);var t=e.i(d("def7c50a")),r=async a=>{try{var d,o,r,i;return await e.f(t).get("/parcels",{params:a});}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"获取包裹列表失败",data:void 0};}},i=async a=>{try{var d,o,r,i;return await e.f(t).get("/my-parcels",{params:a});}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"获取包裹列表失败",data:void 0};}},s=async a=>{try{var d,o,r,i;return await e.f(t).get("/parcels/by-pickup-code/".concat(a));}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||40002,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"包裹不存在",data:void 0};}},c=async a=>{try{var d,o,r,i;return await e.f(t).get("/parcels/by-tracking/".concat(a));}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||40002,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"包裹不存在",data:void 0};}},l=async a=>{try{var d,o,r,i;return await e.f(t).post("/parcels/receive",a);}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"入库失败",data:void 0};}},v=async a=>{try{var d,o,r,i;return await e.f(t).post("/parcels/".concat(a,"/shelve"));}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"上架失败",data:void 0};}},n=async a=>{try{var d,o,r,i;return await e.f(t).post("/parcels/pickup",a);}catch(e){return{code:(null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.code)||5e4,message:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"取件失败",data:void 0};}},u=async()=>{try{var a,d,o,r,i=await e.f(t).get("/dashboard/statistics");return 0===i.code&&i.data&&(i.data={today:{received_count:i.data.today.received_count,picked_up_count:i.data.today.picked_up_count,overdue_count:i.data.today.overdue_count},parcels:{total:i.data.parcels.total,received:i.data.parcels.received,shelved:i.data.parcels.shelved,ready:i.data.parcels.ready,picked_up:i.data.parcels.picked_up,overdue:i.data.parcels.overdue,returned:i.data.parcels.returned},shelves:{total_capacity:i.data.shelves.total_capacity,total_used:i.data.shelves.total_used,utilization_rate:i.data.shelves.utilization_rate},recent_trends:i.data.recent_trends.map(e=>({date:e.date,received:e.received,picked_up:e.picked_up}))}),i;}catch(e){return{code:(null===(d=e.response)||void 0===d?void 0:null===(a=d.data)||void 0===a?void 0:a.code)||5e4,message:(null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.message)||"获取统计数据失败",data:void 0};}};},"ddc00f4e":function r(r,a,t,e){r._m(a);var n=t("493f9ad4");t("c550eeaa"),t("2d08c2e5"),t("a3876e70"),a.default=(r,a)=>{var t=r.__vccOpts||r,e=!0,l=!1,c=void 0;try{for(var f,o=a[Symbol.iterator]();!(e=(f=o.next()).done);e=!0){var u=n._(f.value,2),v=u[0],i=u[1];t[v]=i;}}catch(r){l=!0,c=r;}finally{try{e||null==o.return||o.return();}finally{if(l)throw c;}}return t;};},"def7c50a":function e(e,o,r,a){e._m(o),r("b25dd2f8");var t=e.i(r("5a7ad514")),s=e.f(t).create({baseURL:e.meta.env.VITE_API_BASE_URL||"http://localhost:8000/v1",timeout:3e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{var o=localStorage.getItem("accessToken");return o&&(e.headers.Authorization="Bearer ".concat(o)),e;},e=>Promise.reject(e)),s.interceptors.response.use(e=>e.data,e=>{if(e.response)switch(e.response.status){case 401:localStorage.removeItem("accessToken"),localStorage.removeItem("userInfo"),"/login"!==window.location.pathname&&(window.location.href="/login");break;case 403:console.error("没有权限访问该资源");break;case 404:console.error("请求的资源不存在");break;case 500:console.error("服务器错误");break;default:console.error("请求失败:",e.response.data.message||"未知错误");}return Promise.reject(e);}),o.default=s;},"df6390f9":function f(f,c,d,a){f._m(c);var e=f.i(d("6f9dc2f6")),_=f.i(d("ddc00f4e")),i=d("6f9dc2f6");f._e(c,i),c.default=f.f(_)(f.f(e),[["__scopeId","data-v-c0a8c279"]]);},"e9accfd2":function e(e,a,t,l){e._m(a),t("2d08c2e5"),t("a3876e70");var r=t("9aaf3498"),u=t("9aaf3498"),o=t("9aaf3498"),i=t("a0cf2c50"),n=t("69191e11"),d=t("1f6a8afd"),c=t("37ef8574"),f={class:"page-container"},N={key:0},v={key:1};a.default=r.defineComponent({__name:"Profile",setup(e){var a=i.useRouter(),t=n.useUserStore(),l=d.useMessage(),r=o.ref(!1),m=o.ref(!1),s=o.ref(null),p=o.ref({realName:"",email:""}),x={user:{text:"用户",type:"default"},staff:{text:"员工",type:"info"},admin:{text:"管理员",type:"success"}},V=async()=>{r.value=!0;var e=await c.getProfile();0===e.code&&e.data?(s.value=e.data,p.value={realName:e.data.realName,email:e.data.email||""}):l.error(e.message||"加载失败"),r.value=!1;},C=()=>{s.value&&(p.value={realName:s.value.realName,email:s.value.email||""}),m.value=!0;},y=()=>{m.value=!1;},h=async()=>{if(!r.value){if(!p.value.realName){l.error("请输入真实姓名");return;}r.value=!0;var e=await c.updateProfile(p.value);0===e.code?(l.success("更新成功"),m.value=!1,s.value&&(s.value.realName=p.value.realName,s.value.email=p.value.email,t.setUserInfo(s.value)),V()):l.error(e.message||"更新失败"),r.value=!1;}},w=()=>{t.logout(),l.success("已退出登录"),a.push("/");};return o.onMounted(()=>{V();}),(e,a)=>(u.openBlock(),u.createElementBlock("div",f,[u.createVNode(u.unref(d.NCard),{title:"个人中心",style:{"max-width":"800px",margin:"0 auto"}},{default:u.withCtx(()=>[!m.value&&s.value?(u.openBlock(),u.createElementBlock("div",N,[u.createVNode(u.unref(d.NDescriptions),{"label-placement":"left",column:1,bordered:""},{default:u.withCtx(()=>[u.createVNode(u.unref(d.NDescriptionsItem),{label:"用户名"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(s.value.username),1)]),_:1}),u.createVNode(u.unref(d.NDescriptionsItem),{label:"真实姓名"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(s.value.realName),1)]),_:1}),u.createVNode(u.unref(d.NDescriptionsItem),{label:"手机号"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(s.value.phone),1)]),_:1}),u.createVNode(u.unref(d.NDescriptionsItem),{label:"邮箱"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(s.value.email||"-"),1)]),_:1}),s.value.idCard?(u.openBlock(),u.createBlock(u.unref(d.NDescriptionsItem),{key:0,label:"身份证号"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(s.value.idCard),1)]),_:1})):u.createCommentVNode("",!0),u.createVNode(u.unref(d.NDescriptionsItem),{label:"角色"},{default:u.withCtx(()=>{var e;return[u.createVNode(u.unref(d.NTag),{type:(null===(e=x[s.value.role])||void 0===e?void 0:e.type)||"default"},{default:u.withCtx(()=>{var e;return[u.createTextVNode(u.toDisplayString((null===(e=x[s.value.role])||void 0===e?void 0:e.text)||s.value.role),1)];}),_:1},8,["type"])];}),_:1})]),_:1}),u.createVNode(u.unref(d.NSpace),{style:{"margin-top":"24px"},justify:"center"},{default:u.withCtx(()=>[u.createVNode(u.unref(d.NButton),{type:"primary",onClick:C},{default:u.withCtx(()=>[...a[2]||(a[2]=[u.createTextVNode(" 编辑资料 ",-1)])]),_:1}),u.createVNode(u.unref(d.NButton),{onClick:w},{default:u.withCtx(()=>[...a[3]||(a[3]=[u.createTextVNode(" 退出登录 ",-1)])]),_:1})]),_:1})])):(u.openBlock(),u.createElementBlock("div",v,[u.createVNode(u.unref(d.NForm),{model:p.value,"label-placement":"left","label-width":"100"},{default:u.withCtx(()=>[u.createVNode(u.unref(d.NFormItem),{label:"真实姓名",required:""},{default:u.withCtx(()=>[u.createVNode(u.unref(d.NInput),{value:p.value.realName,"onUpdate:value":a[0]||(a[0]=e=>p.value.realName=e),placeholder:"请输入真实姓名"},null,8,["value"])]),_:1}),u.createVNode(u.unref(d.NFormItem),{label:"邮箱"},{default:u.withCtx(()=>[u.createVNode(u.unref(d.NInput),{value:p.value.email,"onUpdate:value":a[1]||(a[1]=e=>p.value.email=e),placeholder:"请输入邮箱"},null,8,["value"])]),_:1})]),_:1},8,["model"]),u.createVNode(u.unref(d.NSpace),{style:{"margin-top":"24px"},justify:"center"},{default:u.withCtx(()=>[u.createVNode(u.unref(d.NButton),{onClick:y},{default:u.withCtx(()=>[...a[4]||(a[4]=[u.createTextVNode(" 取消 ",-1)])]),_:1}),u.createVNode(u.unref(d.NButton),{type:"primary",loading:r.value,onClick:h},{default:u.withCtx(()=>[...a[5]||(a[5]=[u.createTextVNode(" 保存 ",-1)])]),_:1},8,["loading"])]),_:1})]))]),_:1})]));}});},"ec0a1d90":function e(e,E,d,D){var r,P,i,n;e._m(E),e.o(E,"ParcelStatus",()=>r),e.o(E,"ShipmentStatus",()=>P),(i=r||(r={})).RECEIVED="received",i.READY_FOR_PICKUP="ready",i.PICKED_UP="picked_up",i.OVERDUE="overdue",i.RETURNED="returned",(n=P||(P={})).PENDING="pending",n.SHIPPED="shipped",n.DELIVERED="delivered",n.CANCELLED="cancelled";},});
//# sourceMappingURL=index_f9e7.80fefc5c.js.map